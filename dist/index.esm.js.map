{"version":3,"file":"index.esm.js","sources":["../src/index.ts"],"sourcesContent":["const isValidDigit = (digit: unknown): boolean => {\n\treturn typeof digit === 'number' && !isNaN(digit) && isFinite(digit) && digit < 10 && digit >= 0;\n};\n\nfunction parse(nhsNumber: unknown): number[] | null {\n\tif (\n\t\tArray.isArray(nhsNumber) &&\n\t\tnhsNumber.length === 10 &&\n\t\tnhsNumber.every((digit) => isValidDigit(digit))\n\t) {\n\t\treturn nhsNumber;\n\t}\n\n\tif (typeof nhsNumber !== 'string') {\n\t\treturn null;\n\t}\n\n\tconst withoutSpace: string = nhsNumber.replace(/\\s/g, '');\n\tif (withoutSpace.length !== 10) {\n\t\treturn null;\n\t}\n\n\tconst digits: number[] = withoutSpace.split('').map((digit: string): number => parseInt(digit));\n\n\tif (digits.some((digit: number) => isNaN(digit))) {\n\t\treturn null;\n\t}\n\n\treturn digits;\n}\n\nfunction calcCheckDigit(digits: number[]): number {\n\tconst total =\n\t\tdigits\n\t\t\t.slice(0, 9)\n\t\t\t.map((digit, ind) => digit * (11 - (ind + 1)))\n\t\t\t.reduce((acc, cur) => acc + cur) % 11;\n\tconst remainder = total % 11;\n\tconst checkDigit = remainder > 0 ? 11 - remainder : 0;\n\treturn checkDigit;\n}\n\nfunction validate(nhsNumber: string | number[]): boolean {\n\tconst digits: number[] | null = parse(nhsNumber);\n\tif (digits === null) {\n\t\treturn false;\n\t}\n\n\tconst expectedCheckDigit: number = digits[9];\n\tconst actualCheckDigit: number = calcCheckDigit(digits);\n\tif (actualCheckDigit === 10) {\n\t\treturn false;\n\t}\n\n\treturn expectedCheckDigit === actualCheckDigit;\n}\n\nexport default validate;\n"],"names":["parse","nhsNumber","Array","isArray","length","every","digit","isNaN","isFinite","isValidDigit","withoutSpace","replace","digits","split","map","parseInt","some","validate","expectedCheckDigit","actualCheckDigit","remainder","slice","ind","reduce","acc","cur","calcCheckDigit"],"mappings":"AAIA,SAASA,EAAMC,GACd,GACCC,MAAMC,QAAQF,IACO,KAArBA,EAAUG,QACVH,EAAUI,OAAOC,GARE,CAACA,GACG,iBAAVA,IAAuBC,MAAMD,IAAUE,SAASF,IAAUA,EAAQ,IAAMA,GAAS,EAOnEG,CAAaH,KAExC,OAAOL,EAGR,GAAyB,iBAAdA,EACV,OAAO,KAGR,MAAMS,EAAuBT,EAAUU,QAAQ,MAAO,IACtD,GAA4B,KAAxBD,EAAaN,OAChB,OAAO,KAGR,MAAMQ,EAAmBF,EAAaG,MAAM,IAAIC,KAAKR,GAA0BS,SAAST,KAExF,OAAIM,EAAOI,MAAMV,GAAkBC,MAAMD,KACjC,KAGDM,EAcR,SAASK,EAAShB,GACjB,MAAMW,EAA0BZ,EAAMC,GACtC,GAAe,OAAXW,EACH,OAAO,EAGR,MAAMM,EAA6BN,EAAO,GACpCO,EAlBP,SAAwBP,GACvB,MAKMQ,EAJLR,EACES,MAAM,EAAG,GACTP,KAAI,CAACR,EAAOgB,IAAQhB,GAAS,IAAMgB,EAAM,MACzCC,QAAO,CAACC,EAAKC,IAAQD,EAAMC,IAAO,GACX,GAE1B,OADmBL,EAAY,EAAI,GAAKA,EAAY,EAWnBM,CAAed,GAChD,OAAyB,KAArBO,GAIGD,IAAuBC"}