{"version":3,"file":"index.esm.js","sources":["../src/index.ts"],"sourcesContent":["function isValidDigit(digit: unknown): boolean {\n\treturn typeof digit === 'number' && !isNaN(digit) && isFinite(digit) && digit < 10 && digit >= 0;\n}\n\nfunction parse(nhsNumber: unknown): number[] | null {\n\tif (\n\t\tArray.isArray(nhsNumber) &&\n\t\tnhsNumber.length === 10 &&\n\t\tnhsNumber.every((digit: unknown) => isValidDigit(digit))\n\t) {\n\t\treturn nhsNumber;\n\t}\n\n\tif (typeof nhsNumber !== 'string') {\n\t\treturn null;\n\t}\n\n\tconst withoutSpace: string = nhsNumber.replace(/\\s/g, '');\n\tif (withoutSpace.length !== 10) {\n\t\treturn null;\n\t}\n\n\tconst digits: number[] = withoutSpace.split('').map((digit: string): number => parseInt(digit));\n\n\tif (digits.some((digit: number) => !isValidDigit(digit))) {\n\t\treturn null;\n\t}\n\n\treturn digits;\n}\n\nfunction calcCheckDigit(digits: number[]): number {\n\tconst total = digits\n\t\t.slice(0, 9)\n\t\t.map((digit, ind) => digit * (11 - (ind + 1)))\n\t\t.reduce((acc, cur) => acc + cur);\n\tconst remainder = total % 11;\n\tconst checkDigit = remainder > 0 ? 11 - remainder : 0;\n\treturn checkDigit;\n}\n\nfunction validate(nhsNumber: string | number[]): boolean {\n\tconst digits: number[] | null = parse(nhsNumber);\n\tif (digits === null) {\n\t\treturn false;\n\t}\n\n\tconst expectedCheckDigit: number = digits[9];\n\tconst actualCheckDigit: number = calcCheckDigit(digits);\n\tif (actualCheckDigit === 10) {\n\t\treturn false;\n\t}\n\n\treturn expectedCheckDigit === actualCheckDigit;\n}\n\nexport default validate;\n"],"names":["isValidDigit","digit","isNaN","isFinite","validate","nhsNumber","digits","Array","isArray","length","every","withoutSpace","replace","split","map","parseInt","some","parse","expectedCheckDigit","actualCheckDigit","remainder","slice","ind","reduce","acc","cur","calcCheckDigit"],"mappings":"AAAA,SAASA,EAAaC,GACrB,MAAwB,iBAAVA,IAAuBC,MAAMD,IAAUE,SAASF,IAAUA,EAAQ,IAAMA,GAAS,EAwChG,SAASG,EAASC,GACjB,MAAMC,EAtCP,SAAeD,GACd,GACCE,MAAMC,QAAQH,IACO,KAArBA,EAAUI,QACVJ,EAAUK,OAAOT,GAAmBD,EAAaC,KAEjD,OAAOI,EAGR,GAAyB,iBAAdA,EACV,OAAO,KAGR,MAAMM,EAAuBN,EAAUO,QAAQ,MAAO,IACtD,GAA4B,KAAxBD,EAAaF,OAChB,OAAO,KAGR,MAAMH,EAAmBK,EAAaE,MAAM,IAAIC,KAAKb,GAA0Bc,SAASd,KAExF,OAAIK,EAAOU,MAAMf,IAAmBD,EAAaC,KACzC,KAGDK,EAcyBW,CAAMZ,GACtC,GAAe,OAAXC,EACH,OAAO,EAGR,MAAMY,EAA6BZ,EAAO,GACpCa,EAjBP,SAAwBb,GACvB,MAIMc,EAJQd,EACZe,MAAM,EAAG,GACTP,KAAI,CAACb,EAAOqB,IAAQrB,GAAS,IAAMqB,EAAM,MACzCC,QAAO,CAACC,EAAKC,IAAQD,EAAMC,IACH,GAE1B,OADmBL,EAAY,EAAI,GAAKA,EAAY,EAWnBM,CAAepB,GAChD,OAAyB,KAArBa,GAIGD,IAAuBC"}